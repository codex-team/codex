{"version":3,"sources":["webpack://codex/./public/app/js/main.js","webpack://codex/./public/app/js/modules/admin.js","webpack://codex/./public/app/js/modules/ajax.js","webpack://codex/./public/app/js/modules/bestDevelopers.js","webpack://codex/./public/app/js/modules/codeStyling.js","webpack://codex/./public/app/js/modules/core.js","webpack://codex/./public/app/js/modules/dom.js","webpack://codex/./public/app/js/modules/dragndrop.js","webpack://codex/./public/app/js/modules/helpers.js","webpack://codex/./public/app/js/modules/join.js","webpack://codex/./public/app/js/modules/player.js","webpack://codex/./public/app/js/modules/polyfills.js","webpack://codex/./public/app/js/modules/profile.js","webpack://codex/./public/app/js/modules/quiz.js","webpack://codex/./public/app/js/modules/quizForm.js","webpack://codex/./public/app/js/modules/scrollUp.js","webpack://codex/./public/app/js/modules/sharer.js","webpack://codex/./public/app/js/modules/showMoreNews.js","webpack://codex/./public/app/js/modules/transport.js","webpack://codex/./public/app/js/modules/vkWidget.js"],"names":["__webpack_require__","codex_","codex","settings","init","set","this","scrollUp","codeStyling","vkWidget","id","display","mode","width","communityId","playVideoButton","document","querySelector","Player","default","sourceURL","toggler","wrapperSelector","docReady","f","test","readyState","window","setTimeout","admin","join","core","dragndrop","sharer","developer","showMoreNews","polyfills","ajax","profile","helpers","quiz","quizForm","transport","module","exports","params","log","listType","items","querySelectorAll","i","length","classList","add","droppableClass","findDraggable","e","target","closest","makeAvatar","elem","avatar","cloneNode","parentNode","insertBefore","nextSibling","rollback","removeChild","remove","targetChanged","newTarget","targetPosition","compareDocumentPosition","move","targetReached","itemId","dataset","itemType","type","itemBelowValue","nextElementSibling","ajaxData","success","getElementById","url","data","JSON","stringify","item_id","item_type","item_below_value","xhr","buildParams","prefix","obj","name","l","rbracket","Array","_typeof","call","successCallback","XMLHTTP","XMLHttpRequest","ActiveXObject","async","formData","contentType","beforeSend","open","setRequestHeader","onreadystatechange","status","responseText","send","a","s","r20","key","value","encodeURIComponent","replace","objectToQueryString","console","warn","parseHTML","markup","doc","implementation","createHTMLDocument","toLowerCase","indexOf","documentElement","innerHTML","body","serialize","form","j","len","jLen","formElement","q","urlencode","str","addNameValue","push","nodeName","elements","disabled","checked","options","selected","toggle","event","bind","chBoxes","addEventListener","$","library","codeBlocksSelector","codeBlocks","Promise","all","loadResource","catch","err","then","hljs","highlightBlock","successFunction","withCredentials","arg","substr","staticLength","DOM","tagName","classNames","attributes","_el$classList","el","createElement","isArray","apply","_toConsumableArray","attrName","nodeToReplace","replaceWith","replaceChild","elementId","path","instanceName","resolve","reject","includes","node","resourcePrefix","defer","charset","rel","timerLabel","time","onload","timeEnd","onerror","src","href","head","appendChild","defaultHandlers","draggableClass","findDroppable","elementFromPoint","clientX","clientY","dragObj","shift","style","left","pageX","x","top","pageY","y","onMouseDown","which","touchSupported","clickedAt","toggleSelection","coords","getCoords","onMouseMove","preventDefault","Math","abs","onMouseUp","rect","getBoundingClientRect","pageXOffset","pageYOffset","changedTouches","touch","screenX","screenY","ondragstart","setCookie","expires","domain","toGMTString","cookie","getCookie","dc","begin","end","unescape","substring","getOffset","_x","_y","isNaN","offsetLeft","offsetTop","clientLeft","clientTop","offsetParent","checkUserCanEdit","showAdditionalFields","textarea","blankAuthBlock","emailInput","joinBlank","joinBlankTextareas","getElementsByTagName","blankShowAdditionalFieldsButton","_dom","_ref","_this","_classCallCheck","wrapper","overlay","CSS","overlayShowed","overlayLoaded","closeButton","showVideoOverlay","_this2","_dom2","make","video","autoplay","loop","source","videoLoaded","close","String","prototype","arguments","Element","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","selector","parentElement","uploadPhotoSuccess","newPhotoURL","settingsPhoto","headerPhoto","quizData","numberOfQuestions","currentQuestion","score","maxScore","UI_","gameProcessing_","quizDataInput","holder","questions","prepare","setupQuestionInterface","currentQuestionObj","questionElems","title","optionsHolder","counter","nextButton","clear","createElem","setAttribute","append","showQuestion","removeEventListener","textContent","answers","map","createOption","answerSelected","answer","current","getUserAnswer","showResult","showAnswer","answerStyle","answerIndex","index","answerMessage","message","insertAfter","showCorrectAnswers","result","resultScore","resultMessage","getMessage","social","createSocial","retry","shareType","class","icon","button","shareMessage","location","desc","description","answerObj","text","tag","classes","elems","parent","elemBefore","firstChild","question","parseFloat","currentTarget","messages","resultMessages","sort","b","nodes","questionInsertAnchor","questionInsertButton","resultMessageInsertAnchor","resultMessageInsertButton","resultMessagesHolder","newDOMElement_","element","textNode","createTextNode","attr","attrNode","createAttribute","setAttributeNode","appendAnswerBlock_","questionIndex","answerData","objectIndex","data-question-index","data-object-index","textColumn","required","scoreColumn","min","step","messageColumn","destroyButtonColumn","destroyButton","destroyButtonCross","insertDOMElement_","updateDestroyIcons_","appendQuestionBlock_","questionData","number","titleLabel","answersHolder","answersHead","answersLabel","scoresLabel","messagesLabel","destroyButtonLabel","addAnswerButtonRow","addAnswerButtonColumn","addAnswerButton","addAnswerButtonPlus","appendResultMessageBlock_","messageData","container","before","parseInt","setEventListeners_","onsubmit","json","jsonQuestion","jsonAnswer","jsonMessage","submit","onclick","elementIndex","contains","undefined","splice","numberTo","destroyObject_","setInitialFormParams_","forms","updateInitialDestroyIcons_","render","scrollPage","windowScrollHandler","scrollTo","vkontakte","link","img","popup","facebook","twitter","telegram","socialType","yaCounter32652805","reachGoal","buttonsSelector","assert","shareButtons","click","shareData","newsItem","news","hided","item","currentButtonClicked","buttons","input","buttonCallback","submitCallback","action","targetId","isMultiple","multiple","fillForm","alreadyAddedInput","field","files","getFileObject","validateExtension","validateMIME","validateSize","size","toFixed","className","response","callback","eval","error_description","fileInput","getFile","fileObj","accept","ext","match","maxSize","targetView","loadScript","showWidget","vkApiScript","VK","Widgets","Group"],"mappings":"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","file":"main.bundle.js","sourcesContent":["require('../css/main.css');\n\n/**\n * CodeX community id at vk.com.\n * used by vkWidget module\n */\nconst VK_COMMUNITY_ID = 103229636;\n\nvar codex = (function (codex_) {\n\n    'use strict';\n\n    codex_.settings = {};\n\n    /**\n    * Preparation method\n    */\n    codex_.init = function (settings) {\n\n        /** Save settings or use defaults */\n        for (var set in settings ) {\n\n            this.settings[set] = settings[set] || this.settings[set] || null;\n\n        }\n\n        codex.scrollUp.init();\n\n        codex.codeStyling.init('.article-code__content');\n\n        codex.vkWidget.init({\n            id: 'vk_groups',\n            display: {\n                'mode': 3,\n                'width': 'auto'\n            },\n            communityId: VK_COMMUNITY_ID\n        });\n\n        /**\n         * Acitve play-video buttons\n         */\n        let playVideoButton = document.querySelector('[name=\"js-show-player\"]');\n\n        if (playVideoButton) {\n\n            const Player = require('./modules/player').default;\n\n            new Player({\n                sourceURL: 'public/app/img/products/ar-tester.mp4',\n                toggler: playVideoButton,\n                wrapperSelector : '.product-card--ar-tester'\n            });\n\n        }\n\n\n\n\n\n\n    };\n\n    return codex_;\n\n})({});\n\n/**\n* Document ready event listener\n* @usage codex.docReady(function(){ # code ... } );\n*/\ncodex.docReady = function (f) {\n\n    return /in/.test(document.readyState) ? window.setTimeout(codex.docReady, 9, f) : f();\n\n};\n\n/**\n* Pages\n*/\ncodex.admin = require('./modules/admin');\ncodex.join = require('./modules/join');\n\n\n/**\n * Modules\n */\ncodex.core = require('./modules/core');\ncodex.dragndrop = require('./modules/dragndrop');\ncodex.scrollUp = require('./modules/scrollUp');\ncodex.sharer = require('./modules/sharer');\ncodex.developer = require('./modules/bestDevelopers');\n// codex.simpleCode = require('./modules/simpleCodeStyling');\ncodex.showMoreNews = require('./modules/showMoreNews');\ncodex.polyfills = require('./modules/polyfills');\ncodex.ajax = require('./modules/ajax');\ncodex.profile = require('./modules/profile');\ncodex.helpers = require('./modules/helpers');\ncodex.quiz = require('./modules/quiz');\ncodex.quizForm = require('./modules/quizForm');\ncodex.transport = require('./modules/transport');\ncodex.vkWidget = require('./modules/vkWidget');\ncodex.codeStyling = require('./modules/codeStyling');\n\nmodule.exports = codex;\n\n","/**\n * Admin page methods\n */\nmodule.exports = function (admin) {\n\n    /**\n     * Initializes dragndrop module\n     * @uses  codex.dragndrop\n     */\n    function initDragNDrop() {\n\n        codex.dragndrop({\n            droppableClass: 'list-item',\n\n            findDraggable: function (e) {\n\n                var target = e.target.closest('.draggable');\n\n                if (target) return target.closest('.list-item');\n\n                return null;\n\n            },\n\n            makeAvatar: function (elem) {\n\n                var avatar = {};\n\n                avatar.elem = elem.cloneNode(true);\n                avatar.elem.classList.add('dnd-avatar');\n\n                elem.parentNode.insertBefore(avatar.elem, elem.nextSibling);\n                elem.classList.add('no-display');\n\n                avatar.rollback = function () {\n\n                    avatar.elem.parentNode.removeChild(avatar.elem);\n                    elem.classList.remove('no-display');\n\n                };\n\n                return avatar;\n\n            },\n\n            targetChanged: function (target, newTarget, avatar) {\n\n                if (!newTarget) return;\n\n                var targetPosition = newTarget.compareDocumentPosition(avatar.elem);\n\n                if (targetPosition&4) {\n\n                    newTarget.parentNode.insertBefore(avatar.elem, newTarget);\n\n                } else if (targetPosition&2) {\n\n                    newTarget.parentNode.insertBefore(avatar.elem, newTarget.nextSibling);\n\n                }\n\n            },\n\n            move: function () {},\n\n            targetReached: function (target, avatar, elem) {\n\n                target.parentNode.insertBefore(elem, target.nextSibling);\n\n                avatar.elem.parentNode.removeChild(avatar.elem);\n                elem.classList.remove('no-display');\n\n                var itemId = elem.dataset.id,\n                    itemType = elem.dataset.type,\n                    itemBelowValue = null,\n                    nextSibling;\n\n                if (nextSibling == elem.nextElementSibling) {\n\n                    itemBelowValue = nextSibling.dataset.type + ':' + nextSibling.dataset.id;\n\n                }\n\n                var ajaxData = {\n                    success: function () {\n\n                        document.getElementById('saved').classList.remove('top-menu__saved_hidden');\n\n                        window.setTimeout(function () {\n\n                            document.getElementById('saved').classList.add('top-menu__saved_hidden');\n\n                        }, 1000);\n\n                    },\n                    type: 'POST',\n                    url: '/admin/feed',\n                    data: JSON.stringify({\n                        'item_id': itemId,\n                        'item_type': itemType,\n                        'item_below_value': itemBelowValue\n                    })\n                };\n\n\n                codex.core.ajax(ajaxData);\n\n            }\n        });\n        // body...\n\n    }\n\n    /**\n     * Module initialization\n     * @param  {Object}      params             - init params\n     * @param  {String|null} params.listType    - feed list type (\"cards\"|\"list\")\n     */\n    admin.init = function ( params ) {\n\n        codex.core.log('Initialized.', 'Module admin');\n\n        if ( params.listType == 'cards' ) {\n\n            var items = document.querySelectorAll('.feed-item');\n\n            for (var i = items.length-1; i > -1; i--) {\n\n                items[i].classList.add('draggable');\n                items[i].classList.add('feed-item--dnd');\n                items[i].classList.add('list-item');\n\n            }\n\n        }\n\n        initDragNDrop();\n\n    };\n\n    return admin;\n\n}({});\n","var ajax = function () {\n\n    var xhr_ = function ( xhr ) {\n\n        var objectToQueryString = function (a) {\n\n            var prefix, s, add, name, r20, output;\n\n            s = [];\n            r20 = /%20/g;\n            add = function (key, value) {\n\n                // If value is a function, invoke it and return its value\n                if (typeof value == 'function') {\n\n                    value = value();\n\n                } else {\n\n                    value = value === null ? '' : value;\n\n                }\n\n                s[ s.length ] = encodeURIComponent(key) + '=' + encodeURIComponent(value);\n\n            };\n            if (a instanceof Array) {\n\n                for (name in a) {\n\n                    add(name, a[name]);\n\n                }\n\n            } else {\n\n                for (prefix in a) {\n\n                    buildParams(prefix, a[ prefix ], add);\n\n                }\n\n            }\n            output = s.join('&').replace(r20, '+');\n            return output;\n\n        };\n\n        var buildParams = function (prefix, obj, add) {\n\n            var name, i, l, rbracket;\n\n            rbracket = /\\[\\]$/;\n            if (obj instanceof Array) {\n\n                for (i = 0, l = obj.length; i < l; i++) {\n\n                    if (rbracket.test(prefix)) {\n\n                        add(prefix, obj[i]);\n\n                    } else {\n\n                        buildParams(prefix + '[' + ( typeof obj[i] === 'object' ? i : '' ) + ']', obj[i], add);\n\n                    }\n\n                }\n\n            } else if (typeof obj == 'object') {\n\n                // Serialize object item.\n                for (name in obj) {\n\n                    buildParams(prefix + '[' + name + ']', obj[ name ], add);\n\n                }\n\n            } else {\n\n                // Serialize scalar item.\n                add(prefix, obj);\n\n            }\n\n        };\n\n        xhr.call = function ( data ) {\n\n            if ( !data || !data.url ) {\n\n                console.warn('url wasn\\'t passed into ajax method' );\n                return;\n\n            }\n\n            var XMLHTTP              = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP'),\n                successCallback;\n\n            data.type         = data.type || 'GET';\n            data.url          = data.url;\n            data.async        = data.async || false;\n            data.data         = data.data || '';\n            data.formData     = data.formData || false;\n            data['content-type'] = data.contentType || 'text/html';\n            successCallback      = data.success || successCallback ;\n\n            if ( data.type == 'GET' && data.data ) {\n\n                data.url = /\\?/.test(data.url) ? data.url + '&' + data.data : data.url + '?' + data.data;\n\n            }\n\n            if (data.beforeSend && typeof data.beforeSend == 'function') {\n\n                data.beforeSend.call();\n\n            }\n\n            XMLHTTP.open( data.type, data.url, data.async );\n            XMLHTTP.setRequestHeader('Content-type', data['content-type'] );\n            XMLHTTP.setRequestHeader('Connection', 'close');\n            XMLHTTP.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n            XMLHTTP.onreadystatechange = function () {\n\n                if ( XMLHTTP.readyState == 4 && XMLHTTP.status == 200 && successCallback) {\n\n                    successCallback.call(XMLHTTP.responseText);\n\n                }\n\n            };\n\n            XMLHTTP.send( data.formData || objectToQueryString(data.data) );\n\n        };\n\n\n        xhr.parseHTML = function (markup) {\n\n            var doc = document.implementation.createHTMLDocument('');\n\n            if (markup.toLowerCase().indexOf('<!doctype') > -1) {\n\n                doc.documentElement.innerHTML = markup;\n\n            } else {\n\n                doc.body.innerHTML = markup;\n\n            }\n            return doc;\n\n        };\n\n        /**\n         * Adapted from {@link http://www.bulgaria-web-developers.com/projects/javascript/serialize/}\n         * Changes:\n         *     Ensures proper URL encoding of name as well as value\n         *     Preserves element order\n         *     XHTML and JSLint-friendly\n         *     Disallows disabled form elements and reset buttons as per HTML4 [successful controls]{@link http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2}\n         *         (as used in jQuery). Note: This does not serialize <object>\n         *         elements (even those without a declare attribute) or\n         *         <input type=\"file\" />, as per jQuery, though it does serialize\n         *         the <button>'s (which are potential HTML4 successful controls) unlike jQuery\n         * @license MIT/GPL\n        */\n        xhr.serialize = function (form) {\n\n            'use strict';\n\n            var i, j, len, jLen, formElement, q = [];\n\n            function urlencode(str) {\n\n                // http://kevin.vanzonneveld.net\n                // Tilde should be allowed unescaped in future versions of PHP (as reflected below), but if you want to reflect current\n                // PHP behavior, you would need to add \".replace(/~/g, '%7E');\" to the following.\n                return encodeURIComponent(str).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\\(/g, '%28').\n                    replace(/\\)/g, '%29').replace(/\\*/g, '%2A').replace(/%20/g, '+');\n\n            }\n            function addNameValue(name, value) {\n\n                q.push(urlencode(name) + '=' + urlencode(value));\n\n            }\n            if (!form || !form.nodeName || form.nodeName.toLowerCase() !== 'form') {\n\n                throw 'You must supply a form element';\n\n            }\n            for (i = 0, len = form.elements.length; i < len; i++) {\n\n                formElement = form.elements[i];\n                if (formElement.name === '' || formElement.disabled) {\n\n                    continue;\n\n                }\n                switch (formElement.nodeName.toLowerCase()) {\n                    case 'input':\n                        switch (formElement.type) {\n                            case 'text':\n                            case 'email':\n                            case 'hidden':\n                            case 'password':\n                            case 'button': // Not submitted when submitting form manually, though jQuery does serialize this and it can be an HTML4 successful control\n                            case 'submit':\n                                addNameValue(formElement.name, formElement.value);\n                                break;\n                            case 'checkbox':\n                            case 'radio':\n                                if (formElement.checked) {\n\n                                    addNameValue(formElement.name, formElement.value);\n\n                                }\n                                break;\n                            case 'file':\n                            // addNameValue(formElement.name, formElement.value); // Will work and part of HTML4 \"successful controls\", but not used in jQuery\n                                break;\n                            case 'reset':\n                                break;\n                        }\n                        break;\n                    case 'textarea':\n                        addNameValue(formElement.name, formElement.value);\n                        break;\n                    case 'select':\n                        switch (formElement.type) {\n                            case 'select-one':\n                                addNameValue(formElement.name, formElement.value);\n                                break;\n                            case 'select-multiple':\n                                for (j = 0, jLen = formElement.options.length; j < jLen; j++) {\n\n                                    if (formElement.options[j].selected) {\n\n                                        addNameValue(formElement.name, formElement.options[j].value);\n\n                                    }\n\n                                }\n                                break;\n                        }\n                        break;\n                    case 'button': // jQuery does not submit these, though it is an HTML4 successful control\n                        switch (formElement.type) {\n                            case 'reset':\n                            case 'submit':\n                            case 'button':\n                                addNameValue(formElement.name, formElement.value);\n                                break;\n                        }\n                        break;\n                }\n\n            }\n\n            return q.join('&');\n\n        };\n\n    };\n\n    return {\n        xhr : xhr_\n    };\n\n}({});\n\nmodule.exports = ajax;\n","/**\n * codex.bestDevelopers module\n * Sets best developers values in admin/user for further output in templates/developers.php\n */\nvar developer = function () {\n\n    var bind = function () {\n\n        var chBoxes = document.querySelectorAll('.developer-checkbox');\n\n        for (var i = chBoxes.length-1; i > -1; i--) {\n\n            chBoxes[i].addEventListener('change', toggle);\n\n        }\n\n    };\n\n    /**\n     * Sends ajax data 0 or 1, whether user is best developer or not\n     * @param {Event} event\n     * @uses codex.core.ajax\n     */\n\n    var toggle = function (event) {\n\n        var data = {\n            data: 'id='+event.target.id+'&value='+(event.target.checked?1:0),\n            url: '/admin/developer'\n        };\n\n        codex.core.ajax(data);\n\n    };\n\n    return {\n        bind: bind\n    };\n\n}();\n\nmodule.exports = developer;\n","/**\n * Code Styling module\n */\nmodule.exports = function codeStyling() {\n\n    'use strict';\n\n    /**\n     * DOM manipulations helper\n     */\n    const $ = require('./dom').default;\n\n    /**\n     * Extrnal library for code styling\n     * @link https://highlightjs.org\n     * @type {Object}\n     */\n    const library = {\n        js: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js',\n        css : '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css'\n    };\n\n    /**\n     * Loads styling library\n     */\n    let prepare = function () {\n\n        return Promise.all([\n            $.loadResource('JS', library.js, 'highlight'),\n            $.loadResource('CSS', library.css, 'highlight')\n        ]).catch( err => console.warn('Cannot load code styling module: ', err))\n        .then( () => console.log('Code Styling is ready') );\n\n    };\n\n    /**\n     * Finds code blocks and fires highlighting\n     * @param {String} codeBlocksSelector - where to find <code> blocks\n     */\n    let init = function (codeBlocksSelector) {\n\n        let codeBlocks = document.querySelectorAll(codeBlocksSelector);\n\n        if (codeBlocks) {\n\n            prepare().then( () => {\n\n                if (!window.hljs) {\n\n                    console.warn('Code Styling script loaded but not ready');\n                    return;\n\n                }\n\n                for (var i = codeBlocks.length - 1; i >= 0; i--) {\n\n                    window.hljs.highlightBlock(codeBlocks[i]);\n\n                }\n\n            });\n\n        }\n\n    };\n\n    return {\n        init\n    };\n\n}();\n","/**\n* Significant core methods\n*/\nmodule.exports =  function () {\n\n    /** Logging method */\n    var log = function (str, prefix, type, arg) {\n\n        var staticLength = 32;\n\n        if (prefix) {\n\n            prefix = prefix.length < staticLength ? prefix : prefix.substr( 0, staticLength - 2 );\n\n            while (prefix.length < staticLength - 1) {\n\n                prefix += ' ';\n\n            }\n\n            prefix += ':';\n            str = prefix + str;\n\n        }\n\n        type = type || 'log';\n\n        try {\n\n            if ('console' in window && window.console[ type ]) {\n\n                if (arg) console[type](str, arg);\n                else console[type](str);\n\n            }\n\n        } catch(e) {}\n\n    };\n\n    /**\n    * Native ajax method.\n    * @param {Object} data\n    */\n    var ajax = function (data) {\n\n        if (!data || !data.url) {\n\n            return;\n\n        }\n\n        var XMLHTTP          = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP'),\n            successFunction  = function () {};\n\n        data.async           = true;\n        data.type            = data.type || 'GET';\n        data.data            = data.data || '';\n        data['content-type'] = data['content-type'] || 'application/json; charset=utf-8';\n        successFunction     = data.success || successFunction ;\n\n        if (data.type == 'GET' && data.data) {\n\n            data.url = /\\?/.test(data.url) ? data.url + '&' + data.data : data.url + '?' + data.data;\n\n        }\n\n        if (data.withCredentials) {\n\n            XMLHTTP.withCredentials = true;\n\n        }\n\n        if (data.beforeSend && typeof data.beforeSend == 'function') {\n\n            data.beforeSend.call();\n\n        }\n\n        XMLHTTP.open( data.type, data.url, data.async );\n        XMLHTTP.setRequestHeader('Content-type', data['content-type'] );\n        XMLHTTP.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        XMLHTTP.onreadystatechange = function () {\n\n            if (XMLHTTP.readyState == 4 && XMLHTTP.status == 200) {\n\n                successFunction(XMLHTTP.responseText);\n\n            }\n\n        };\n\n        XMLHTTP.send(data.data);\n\n    };\n\n\n    return {\n        ajax : ajax,\n        log : log\n    };\n\n}();\n","/**\n * DOM manipulations methods\n */\nexport default class DOM {\n  /**\n   * Helper for making Elements with classname and attributes\n   * @param  {string} tagName           - new Element tag name\n   * @param  {array|string} classNames  - list or name of CSS classname(s)\n   * @param  {Object} attributes        - any attributes\n   * @return {Element}\n   */\n    static make(tagName, classNames, attributes) {\n\n        var el = document.createElement(tagName);\n\n        if ( Array.isArray(classNames) ) {\n\n            el.classList.add(...classNames);\n\n        } else if( classNames ) {\n\n            el.classList.add(classNames);\n\n        }\n\n        for (let attrName in attributes) {\n\n            el[attrName] = attributes[attrName];\n\n        }\n\n        return el;\n\n    }\n\n  /**\n  * Replaces node with\n  * @param {Element} nodeToReplace\n  * @param {Element} replaceWith\n  */\n    static replace(nodeToReplace, replaceWith) {\n\n        return nodeToReplace.parentNode.replaceChild(replaceWith, nodeToReplace);\n\n    }\n\n  /**\n  * getElementById alias\n  * @param {String} elementId\n  */\n    static get(elementId) {\n\n        return document.getElementById(elementId);\n\n    }\n\n  /**\n  * Loads static resourse: CSS or JS\n  * @param {string} type  - CSS|JS\n  * @param {string} path  - resource path\n  * @param {string} inctanceName - unique name of resource\n  * @return Promise\n  */\n    static loadResource(type, path, instanceName) {\n\n    /**\n     * Imported resource ID prefix\n     * @type {String}\n     */\n        const resourcePrefix = 'cdx-resourse';\n\n        return new Promise(function (resolve, reject) {\n\n            if (!type || !['JS', 'CSS'].includes(type)) {\n\n                reject(`Unexpected resource type passed. «CSS» or «JS» expected, «${type}» passed`);\n\n            }\n\n            let node;\n\n      /** Script is already loaded */\n            if ( !instanceName ) {\n\n                reject('Instance name is missed');\n\n            } else if ( document.getElementById(`${resourcePrefix}-${type.toLowerCase()}-${instanceName}`) ) {\n\n                resolve(path);\n\n            }\n\n            if (type === 'JS') {\n\n                node = document.createElement('script');\n                node.async = true;\n                node.defer = true;\n                node.charset = 'utf-8';\n\n            } else {\n\n                node = document.createElement('link');\n                node.rel = 'stylesheet';\n\n            }\n\n            node.id = `${resourcePrefix}-${type.toLowerCase()}-${instanceName}`;\n\n            let timerLabel = `Resource loading ${type} ${instanceName}`;\n\n            console.time(timerLabel);\n\n            node.onload = function () {\n\n                console.timeEnd(timerLabel);\n                resolve(path);\n\n            };\n\n            node.onerror = function () {\n\n                console.timeEnd(timerLabel);\n                reject(path);\n\n            };\n\n            if (type === 'JS') {\n\n                node.src = path;\n\n            } else {\n\n                node.href = path;\n\n            }\n\n            document.head.appendChild(node);\n\n        });\n\n    }\n}\n","module.exports = function (settings) {\n\n    var defaultHandlers = {\n        findDraggable: function (e) {\n\n            return e.target.closest('.'+draggableClass);\n\n        },\n\n        findDroppable: function (e) {\n\n            return document.elementFromPoint(e.clientX, e.clientY).closest('.'+droppableClass);\n\n        },\n\n        /**\n         * The simplest makeAvatar method.\n         *\n         * Just set elem to avatar.elem. And remembers element position in document.\n         * If drop isn`t success, returns elem to start position.\n         */\n        makeAvatar: function (elem) {\n\n            var avatar = {};\n\n            var avatarRollback = function () {\n\n                avatar.elem.classList.remove('dnd-default-avatar');\n\n                if (avatar.nextSibling)\n                    avatar.parentNode.insertBefore(avatar.elem, avatar.nextSibling);\n                else\n                    avatar.parentNode.appendChild(avatar.elem);\n\n                delete(dragObj.avatar);\n\n            };\n\n            avatar = {\n                elem: elem,\n                parentNode: elem.parentNode,\n                nextSibling: elem.nextElementSibling,\n                rollback: avatarRollback\n            };\n\n            // Set avatar position: absolute; for drag'n'drop\n            avatar.elem.classList.add('dnd-default-avatar');\n\n            return avatar;\n\n        },\n\n        /**\n         * Highlights droppable elements under cursor with border\n         */\n        targetChanged: function (target, newTarget) {\n\n            if (target) target.classList('dnd-default-target-highlight');\n\n            if (newTarget) newTarget.classList.add('dnd-default-target-highlight');\n\n        },\n\n        move: function (e, avatar, shift) {\n\n            avatar.elem.style.left = e.pageX - shift.x + 'px';\n            avatar.elem.style.top = e.pageY - shift.y + 'px';\n\n        },\n\n        /**\n         * Inserts elem into document if drop is success\n         */\n        targetReached: function (target, avatar, elem) {\n\n            target.classList.remove('dnd-default-target-highlight');\n            target.parentNode.insertBefore(elem, target.nextElementSibling);\n            avatar.elem.classList.remove('dnd-default-avatar');\n\n        }\n    };\n\n    var draggableClass  = settings.draggableClass   || 'draggable',\n        droppableClass   = settings.droppableClass    || 'droppable',\n        findDraggable   = settings.findDraggable    || defaultHandlers.findDraggable,\n        findDroppable    = settings.findDroppable     || defaultHandlers.findDroppable,\n        makeAvatar      = settings.makeAvatar       || defaultHandlers.makeAvatar,\n        targetChanged   = settings.targetChanged    || defaultHandlers.targetChanged,\n        move            = settings.move             || defaultHandlers.move,\n        targetReached   = settings.targetReached    || defaultHandlers.targetReached;\n\n    var dragObj = {};\n\n    var onMouseDown = function (e) {\n\n        /**\n         * Check mouse (which=1 - right mouse button) or touch (which=0 - touch) event.\n         */\n        if (e.which > 1) return;\n\n        e = touchSupported(e);\n\n        dragObj.clickedAt = {\n            x: e.pageX,\n            y: e.pageY\n        };\n\n        dragObj.elem = findDraggable(e);\n\n        if (!dragObj.elem) return;\n\n        toggleSelection();\n\n        var coords = getCoords(dragObj.elem);\n\n        dragObj.shift = {\n            x: e.pageX - coords.x,\n            y: e.pageY - coords.y\n        };\n\n    };\n\n    var onMouseMove = function (e) {\n\n        if (!dragObj.elem) return;\n\n        // Prevent touchmove scroll\n        e.preventDefault();\n\n        e = touchSupported(e);\n\n        // Check mouse offset. If x or y offset <5, assume that it`s accidental move\n        if (Math.abs(e.pageX - dragObj.clickedAt.x) < 5 && Math.abs(e.pageY - dragObj.clickedAt.y) < 5) return;\n\n        if (!dragObj.avatar) {\n\n            dragObj.avatar = makeAvatar(dragObj.elem);\n\n        }\n\n        var newTarget = findDroppable(e);\n\n        if (newTarget != dragObj.target) {\n\n            targetChanged(dragObj.target, newTarget, dragObj.avatar);\n\n            dragObj.target = newTarget;\n\n        }\n\n\n        move(e, dragObj.avatar, dragObj.shift);\n\n    };\n\n    var onMouseUp = function (e) {\n\n        if (e.which > 1) return;\n\n        if (!dragObj.avatar) {\n\n            dragObj = {};\n            return;\n\n        }\n\n        e = touchSupported(e);\n\n        var target = findDroppable(e);\n\n        if (target)\n            targetReached(target, dragObj.avatar, dragObj.elem, e);\n        else\n            dragObj.avatar.rollback();\n\n        dragObj = {};\n\n        toggleSelection();\n\n    };\n\n    var getCoords = function (elem) {\n\n        var rect = elem.getBoundingClientRect();\n\n        return {\n            x: rect.left + window.pageXOffset,\n            y: rect.top + window.pageYOffset\n        };\n\n    };\n\n    var touchSupported = function (e) {\n\n        if (e.changedTouches)\n            var touch = e.changedTouches[0];\n\n        else\n            return e;\n\n        e.pageX = touch.pageX;\n        e.pageY = touch.pageY;\n\n        e.clientX = touch.clientX;\n        e.clientY = touch.clientY;\n\n        e.screenX = touch.screenX;\n        e.screenY = touch.screenY;\n\n        e.target = touch.target;\n\n        return e;\n\n    };\n\n    var toggleSelection = function () {\n\n        document.body.classList.toggle('no-selection');\n\n    };\n\n\n    document.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('touchstart', onMouseDown);\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('touchmove', onMouseMove);\n\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('touchend', onMouseUp);\n\n    document.ondragstart = function () {\n\n        return false;\n\n    };\n\n};\n","module.exports = (function (helpers) {\n\n    helpers.setCookie = function (name, value, expires, path, domain) {\n\n        var str = name + '='+value;\n\n        if (expires) str += '; expires=' + expires.toGMTString();\n        if (path)    str += '; path=' + path;\n        if (domain)  str += '; domain=' + domain;\n        document.cookie = str;\n\n    };\n\n    helpers.getCookie = function (name) {\n\n        var dc = document.cookie;\n\n        var prefix = name + '=';\n        var begin = dc.indexOf('; ' + prefix);\n\n        if (begin == -1) {\n\n            begin = dc.indexOf(prefix);\n            if (begin !== 0) return null;\n\n        } else\n            begin += 2;\n\n        var end = document.cookie.indexOf(';', begin);\n\n        if (end == -1) end = dc.length;\n\n        return unescape(dc.substring(begin + prefix.length, end));\n\n    };\n\n    helpers.getOffset = function ( el ) {\n\n        var _x = 0;\n        var _y = 0;\n\n        while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {\n\n            _x += (el.offsetLeft + el.clientLeft);\n            _y += (el.offsetTop + el.clientTop);\n            el = el.offsetParent;\n\n        }\n        return { top: _y, left: _x };\n\n    };\n\n    return helpers;\n\n})({});","/**\n * Module for /join page\n * Blocks writing without authorization\n *\n * Toggles into view blankAdditionalFields: Name and Surname, Email\n */\nvar join = function () {\n\n    const animationClass = 'wobble';\n\n    /**\n    * Module initialization\n    */\n    var init = function () {\n\n        var joinBlank = document.getElementById('joinBlank');\n\n        if ( typeof joinBlank != 'undefined' && joinBlank !== null ) {\n\n            var joinBlankTextareas = joinBlank.getElementsByTagName('textarea');\n\n            if (joinBlankTextareas.length) {\n\n                for (var i = joinBlankTextareas.length - 1; i >= 0; i--) {\n\n                    joinBlankTextareas[i].addEventListener('keyup', checkUserCanEdit, false);\n\n                }\n\n            }\n\n        }\n\n        var blankShowAdditionalFieldsButton = document.getElementById('blankShowAdditionalFieldsButton');\n\n        if ( typeof blankShowAdditionalFieldsButton != 'undefined' && blankShowAdditionalFieldsButton !== null ) {\n\n            blankShowAdditionalFieldsButton.addEventListener('click', showAdditionalFields, false);\n\n        }\n\n    };\n\n    /**\n     * Adds wobble-effect to Auth block if user starts typing into textarea unauthorized\n     * @param {Event} event\n     */\n    let checkUserCanEdit = function (event) {\n\n        var textarea       = event.target,\n            blankAuthBlock = document.getElementById('js-join-auth'),\n            emailInput     = document.getElementById('js-email');\n\n        if (blankAuthBlock && !emailInput.value.length ) {\n\n            blankAuthBlock.classList.add(animationClass);\n\n            window.setTimeout(() => blankAuthBlock.classList.remove(animationClass), 450);\n\n            textarea.value = '';\n\n        }\n\n    };\n\n    /**\n     * Toggles into view blankAdditionalFields: Name and Surname, Email\n     * @param {Event} event\n     */\n    var showAdditionalFields = function () {\n\n        var blankAdditionalFields = document.getElementById('blankAdditionalFields');\n\n        blankAdditionalFields.classList.toggle('hide');\n\n    };\n\n    return {\n        init : init\n    };\n\n}({});\n\nmodule.exports = join;\n","/**\n * DOM manipulation methods\n */\nimport $ from './dom';\n\n/**\n * @class  Player\n * @classdesc Simple player on the overlay container\n *\n * @typedef {Player}\n * @property {String} sourceURL - video URL\n * @property {Element} toggler  - Play Button\n * @property {Element} wrapper  - In wich Element player should be added\n * @property {Element} overlay  - Player main container\n * @property {Object} CSS       - CSS dictionary\n *\n */\nexport default class Player {\n\n    /**\n     * @constructor\n     * @param  {String} options.sourceURL        - video URL\n     * @param  {Element} options.toggler         - play button\n     * @param  {String} options.wrapperSelector  - xpath selector for the player holder\n     */\n    constructor({sourceURL, toggler, wrapperSelector}) {\n\n        this.sourceURL = sourceURL;\n        this.toggler = toggler;\n        this.wrapper = document.querySelector(wrapperSelector);\n        this.overlay = null;\n\n        this.CSS = {\n            overlay: 'video-overlay',\n            overlayShowed: 'video-overlay--showed',\n            overlayLoaded: 'video-overlay--loaded',\n            closeButton: 'video-overlay__close'\n        };\n\n        /**\n         * Add Play Button click listener\n         */\n        this.toggler.addEventListener('click', () => {\n\n            this.showVideoOverlay();\n\n        }, false);\n\n    }\n\n    /**\n     * Creates player container and append it to the parent element\n     */\n    showVideoOverlay() {\n\n        this.overlay = $.make('div', this.CSS.overlay);\n\n        let video = $.make('video', null, {\n                autoplay: true,\n                loop: true\n            }),\n            source = $.make('source', null, {\n                src: this.sourceURL,\n                type: 'video/mp4'\n            }),\n            closeButton = $.make('div', this.CSS.closeButton);\n\n        /**\n         * Append <video>\n         */\n        video.appendChild(source);\n        this.overlay.appendChild(video);\n\n        /**\n         * Bind loading callback\n         */\n        video.addEventListener('loadeddata', () => {\n\n            this.videoLoaded();\n\n        });\n\n        /**\n         * Activate close button\n         */\n        this.overlay.appendChild(closeButton);\n        closeButton.addEventListener('click', () => {\n\n            this.close();\n\n        });\n\n        /**\n         * Add overlay to the wrapper\n         */\n        this.wrapper.appendChild(this.overlay);\n        window.setTimeout(() => {\n\n            this.overlay.classList.add(this.CSS.overlayShowed);\n\n        }, 50);\n\n    }\n\n    /**\n     * Video loaded callback\n     * Shows player\n     */\n    videoLoaded() {\n\n        this.wrapper.classList.add(this.CSS.overlayLoaded);\n\n    }\n\n    /**\n     * Removes overlay with video\n     */\n    close() {\n\n        this.overlay.remove();\n        this.overlay = null;\n\n    }\n}\n","\nvar polyfills = function () {\n\n        /**\n        * Polyfilling ECMAScript 6 method String.includes\n        * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Browser_compatibility\n        */\n    if ( !String.prototype.includes ) {\n\n        String.prototype.includes = function () {\n\n            'use strict';\n\n            return String.prototype.indexOf.apply(this, arguments) !== -1;\n\n        };\n\n    }\n\n\n        /**\n        * Polyfill for Element.prototype.matches method\n        */\n    if (!Element.prototype.matches) {\n\n        Element.prototype.matches = Element.prototype.matchesSelector ||\n                                        Element.prototype.webkitMatchesSelector ||\n                                        Element.prototype.mozMatchesSelector ||\n                                        Element.prototype.msMatchesSelector;\n\n    }\n\n        /**\n        * Polyfill for Element.prototype.closest method\n        */\n    if (!Element.prototype.closest) {\n\n        Element.prototype.closest = function (selector) {\n\n            var node = this;\n\n            while (node) {\n\n                if (node.matches(selector)) return node;\n                node = node.parentElement;\n\n            }\n\n            return null;\n\n        };\n\n    };\n\n}({});\n\nmodule.exports = polyfills;\n","/**\n * Profile page methods\n */\nmodule.exports = function () {\n\n\t/**\n\t * Photo uploading success-callback\n\t * Fired by transport\n\t * @param  {string} newPhotoURL - uploaded file URL\n\t */\n    var uploadPhotoSuccess = function (newPhotoURL) {\n\n        var settingsPhoto = document.getElementById('profile-photo-updatable'),\n            headerPhoto   = document.getElementById('header-avatar-updatable');\n\n        settingsPhoto.src = newPhotoURL;\n        headerPhoto.src   = newPhotoURL;\n\n    };\n\n    return {\n        uploadPhotoSuccess,\n    };\n\n}();\n","/**\n * Модуль quiz с единственным публичным методом quiz.init()\n */\nmodule.exports = (function () {\n\n    var quizData            = null,\n        numberOfQuestions   = null,\n        currentQuestion     = null,\n        score               = null,\n        maxScore            = null;\n\n\n    /**\n     * Публичный метод init.\n     *\n     * @param {object} quizDataInput  - объект с информацией о тесте\n     * @param {string} holder - id элемента, в который будет выводиться тест\n     */\n    var init = function (quizDataInput, holder) {\n\n        quizData = quizDataInput;\n        numberOfQuestions = quizData.questions.length;\n        currentQuestion = 0;\n        score = 0;\n\n        gameProcessing_.prepare();\n        UI_.prepare(holder);\n        UI_.setupQuestionInterface();\n\n    };\n\n    var UI_ = {\n\n        holder: null,\n        currentQuestionObj: null,\n\n        // Объект, в котором будут храниться DOM-элементы, связанные с отображением вопроса\n        questionElems: null,\n\n        prepare: function (holder) {\n\n            UI_.holder = document.getElementById(holder);\n            UI_.holder.classList.add('quiz');\n            UI_.holder.classList.add('clearfix');\n\n        },\n\n        /**\n         * Создаем элементы для вывода теста, заносим их в UI_.questionElems и выводим на страницу.\n         */\n        setupQuestionInterface: function () {\n\n            UI_.clear();\n\n            var title,\n                optionsHolder,\n                counter,\n                nextButton;\n\n            title = UI_.createElem('div', 'quiz__question-title');\n\n            optionsHolder = UI_.createElem('div', 'quiz__question-options');\n\n            counter = UI_.createElem('div', 'quiz__question-counter');\n\n            nextButton = UI_.createElem('input', ['quiz__question-button', 'quiz__question-button_next']);\n\n            nextButton.setAttribute('type', 'button');\n            nextButton.setAttribute('value', 'Далее →');\n\n            UI_.questionElems = {\n                counter: counter,\n                title: title,\n                optionsHolder: optionsHolder,\n                options: [],\n                nextButton: nextButton\n            };\n\n            UI_.append(UI_.questionElems);\n\n            UI_.showQuestion();\n\n        },\n\n        /**\n         * Выводим текущий вопрос на страницу (вопрос, варианты ответа и счетчик)\n         */\n        showQuestion: function () {\n\n            UI_.clear(UI_.questionElems.optionsHolder);\n            UI_.questionElems.options = [];\n            UI_.questionElems.nextButton.removeEventListener('click', UI_.showQuestion);\n            UI_.currentQuestionObj = quizData.questions[currentQuestion];\n\n            UI_.questionElems.nextButton.setAttribute('disabled', true);\n\n            UI_.questionElems.title.textContent = UI_.currentQuestionObj.title;\n            UI_.questionElems.counter.textContent = currentQuestion + 1 + '/' + numberOfQuestions;\n\n            UI_.currentQuestionObj.answers.map(UI_.createOption);\n\n        },\n\n        answerSelected: function (answer) {\n\n            answer.classList.add('quiz__question-answer_selected');\n\n            UI_.questionElems.options.map(function (current) {\n\n                current.removeEventListener('click', gameProcessing_.getUserAnswer);\n\n            });\n\n            UI_.questionElems.nextButton.disabled = false;\n\n            if (currentQuestion < numberOfQuestions  - 1) {\n\n                UI_.questionElems.nextButton.addEventListener('click', UI_.showQuestion);\n\n            } else {\n\n                UI_.questionElems.nextButton.addEventListener('click', UI_.showResult);\n\n            }\n\n            UI_.showAnswer(answer);\n\n            currentQuestion++;\n\n        },\n        /**\n         * Добавляем стили и выводим сообщение для выбранного варианта ответа\n         * Открываем доступ к следующему вопросу\n         *\n         * @param {Element} answer - DOM-элемент выбранного ответа\n         */\n        showAnswer: function (answer) {\n\n            var answerStyle = answer.dataset.score > 0 ? '_right' :  '_wrong',\n                answerIndex = answer.dataset.index;\n\n            answer.classList.add('quiz__question-answer' + answerStyle);\n\n            var answerMessage = UI_.createElem('div', 'quiz__answer-message');\n\n            answerMessage.textContent = UI_.currentQuestionObj.answers[answerIndex].message;\n\n            UI_.insertAfter(answerMessage, answer);\n\n            if (answer.dataset.score == 0) {\n\n                UI_.showCorrectAnswers();\n\n            }\n\n        },\n\n        showCorrectAnswers: function () {\n\n            UI_.questionElems.options.map(function (answer) {\n\n                if (answer.dataset.score > 0) {\n\n                    answer.classList.add('quiz__question-answer_right');\n\n                } else {\n\n                    answer.classList.add('quiz__question-answer_wrong');\n\n                }\n\n            });\n\n        },\n\n        showResult: function () {\n\n            var result =  score + '/' + maxScore;\n\n            UI_.questionElems.nextButton.removeEventListener('click', UI_.showResult);\n\n            UI_.clear();\n\n            var resultScore = UI_.createElem('div', 'quiz__result-score');\n\n            resultScore.textContent = result;\n\n            var resultMessage = UI_.createElem('div', 'quiz__result-message');\n\n            resultMessage.textContent = gameProcessing_.getMessage();\n\n            var social = UI_.createElem('div', 'quiz__sharing');\n\n            UI_.createSocial(social, result);\n\n            var retry = UI_.createElem('div', 'quiz__retry-button');\n\n            retry.textContent = 'Пройти еще раз';\n            retry.addEventListener('click', init.bind(null, quizData, UI_.holder.id));\n\n            UI_.append([resultScore, resultMessage, social, retry]);\n\n            codex.sharer.init();\n\n        },\n\n        /**\n         * Создаем кнопки социальных сетей и добавляем их в holder\n         *\n         * @param {Element} holder\n         */\n        createSocial: function (holder, result) {\n\n            var networks = [\n                {\n                    title: 'Share on the VK',\n                    shareType: 'vkontakte',\n                    class: 'vk',\n                    icon: 'icon-vkontakte'\n                },\n                {\n                    title: 'Share on the Facebook',\n                    shareType: 'facebook',\n                    class: 'fb',\n                    icon: 'icon-facebook-squared'\n                },\n                {\n                    title: 'Tweet',\n                    shareType: 'twitter',\n                    class: 'tw',\n                    icon: 'icon-twitter'\n                },\n                {\n                    title: 'Forward in Telegramm',\n                    shareType: 'telegram',\n                    class: 'tg',\n                    icon: 'icon-paper-plane'\n                }\n            ];\n\n            networks.map(function (current) {\n\n                var button = UI_.createElem('span', ['but', current.class]),\n                    icon   = UI_.createElem('i', current.icon),\n                    shareMessage = null;\n\n                button.dataset.shareType = current.shareType;\n                button.setAttribute('title', current.title);\n\n                if (quizData.shareMessage) {\n\n                    shareMessage =  quizData.shareMessage.replace('$score', result);\n\n                }\n\n                shareMessage = shareMessage || 'Я набрал ' + result + ' в ' + (quizData.title || 'тесте от команды CodeX');\n\n                button.dataset.url      = window.location.href;\n                button.dataset.title    = shareMessage;\n                button.dataset.desc     = quizData.description || '';\n\n                UI_.append(icon, button);\n                UI_.append(button, holder);\n\n            });\n\n        },\n\n        /**\n         * Создаем i-й вариант ответа и выводим в UI_.questionElems.optionsHolder\n         * И добавляем в UI_.questionElems.options\n         *\n         * @param {Object} answer - объект варианта ответа\n         * @param {int} i - его номер в вопросе\n         */\n        createOption: function (answer, i) {\n\n            var answerObj = UI_.createElem('div', 'quiz__question-answer');\n\n            answerObj.dataset.score = answer.score;\n            answerObj.dataset.index = i;\n            answerObj.textContent = answer.text;\n\n            // Вешаем слушатель на вариант ответа\n            answerObj.addEventListener('click', gameProcessing_.getUserAnswer);\n\n            UI_.questionElems.options.push(answerObj);\n\n            UI_.append(answerObj, UI_.questionElems.optionsHolder);\n\n        },\n\n        /**\n         * Создает новый DOM-элемент с набором переданных классов\n         *\n         * @param {string} tag - имя тега\n         * @param {string|Array} classes - имя или массив имен классов\n         * @returns {Element}\n         */\n        createElem: function (tag, classes) {\n\n            var elem = document.createElement(tag);\n\n            if (!classes) {\n\n                return elem;\n\n            }\n\n            if (classes instanceof Array) {\n\n                for (var i in classes) {\n\n                    elem.classList.add(classes[i]);\n\n                }\n\n            } else {\n\n                elem.classList.add(classes);\n\n            }\n\n            return elem;\n\n        },\n\n        /**\n         * Добавляет элементы в переданный элемент\n         *\n         * @param {Element|Array} elems - элемент или массив элементов\n         * @param {Element|null} parent - родитель или UI_.holder, если передан NULL\n         */\n        append: function (elems, parent) {\n\n            parent = parent || UI_.holder;\n\n            if (!(elems instanceof Element)) {\n\n                for (var i in elems) {\n\n                    if (elems[i] instanceof Element) {\n\n                        parent.appendChild(elems[i]);\n\n                    }\n\n                }\n\n            } else {\n\n                parent.appendChild(elems);\n\n            }\n\n        },\n\n\n        /**\n         * Вставляет элемент после переданного элемента\n         *\n         * @param {Element} elem\n         * @param {Element} elemBefore\n         */\n        insertAfter: function (elem, elemBefore) {\n\n            if (elemBefore.nextSibling) {\n\n                UI_.questionElems.optionsHolder.insertBefore(elem, elemBefore.nextSibling);\n\n            } else {\n\n                UI_.append(elem, elemBefore.parentNode);\n\n            }\n\n        },\n\n        /**\n         * Удалаяет все дочерние элементы элемента parent\n         *\n         * @param {Element} parent\n         */\n        clear: function (parent) {\n\n            parent = parent || UI_.holder;\n\n            while (parent.firstChild) {\n\n                parent.removeChild(parent.firstChild);\n\n            }\n\n        }\n\n    };\n\n    var gameProcessing_ = {\n\n        prepare: function () {\n\n            maxScore = 0;\n\n            quizData.questions.map(function (question) {\n\n                question.answers.map(function (answer) {\n\n                    maxScore += parseFloat(answer.score);\n\n                });\n\n            });\n\n        },\n\n        /**\n         * Добавляет баллы за ответ\n         *\n         * @param {Object} e - объект события клика по варианту ответа\n         */\n        getUserAnswer: function (e) {\n\n            var answer = e.currentTarget;\n\n            score += parseFloat(answer.dataset.score);\n\n            UI_.answerSelected(answer);\n\n        },\n\n        /**\n         * Получает сообщение о результате для набранного количества баллов\n         *\n         * @returns {string} message\n         */\n        getMessage: function () {\n\n            var messages = quizData.resultMessages,\n                message;\n\n            messages.sort(function (a, b) {\n\n                return a['score'] - b['score'];\n\n            });\n\n            if (!messages.length) {\n\n                return;\n\n            }\n\n            for (var i in messages) {\n\n                if (score < messages[i]['score']) {\n\n                    break;\n\n                }\n\n                message = messages[i]['message'];\n\n            }\n\n            return message;\n\n        }\n\n    };\n\n    return {\n        init: init\n    };\n\n})();\n","/**\n* Quiz form client handler\n* Author: @ndawn\n* Date: 09/12/16\n*/\n\nmodule.exports = (function (quiz) {\n\n    /**\n    * Quiz form\n    * @var {null} quiz.form - form DOM element\n    */\n    quiz.form = null;\n\n\n    /**\n    * Nodes list\n    * @var {object} quiz.nodes - dict of DOM elements of questions and result messages\n    */\n    quiz.nodes = {\n        'title': null,\n        'description': null,\n        'questions': [],\n        'resultMessages': [],\n        'shareMessage': null\n    };\n\n\n    /**\n    * Question insert button and anchor for new questions\n    * @var {Element} quiz.questionInsertAnchor - DOM element of question insert anchor\n    * @var {Element} quiz.questionInsertButton - DOM element of question insert button\n    */\n    quiz.questionInsertAnchor = null;\n    quiz.questionInsertButton = null;\n\n\n    /**\n    * Result message insert button and anchor for new resultMessages\n    * @var {Element} quiz.resultMessageInsertAnchor - DOM element of result message insert anchor\n    * @var {Element} quiz.resultMessageInsertButton - DOM element of result message insert button\n    */\n    quiz.resultMessageInsertAnchor = null;\n    quiz.resultMessageInsertButton = null;\n\n\n    /**\n    * Result messages holder element\n    * @var {Element} quiz.resultMessagesHolder - DOM element of result messages holder\n    */\n    quiz.resultMessagesHolder = null;\n\n\n    /**\n    * @private\n    * DOM element creating function\n    * Creates a DOM element with given attributes\n    * @param {string} tag - HTML tag of the element\n    * @param {object} attributes - dictionary with attributes to be added to the element\n    */\n    var newDOMElement_ = function (tag, attributes, text) {\n\n        text = text || '';\n        var element = document.createElement(tag);\n        var textNode = document.createTextNode(text);\n\n        element.appendChild(textNode);\n\n        for (var attr in attributes) {\n\n            var attrNode = document.createAttribute(attr);\n\n            attrNode.value = attributes[attr];\n            element.setAttributeNode(attrNode);\n\n        }\n\n        return element;\n\n    };\n\n\n    /**\n    * @private\n    * Answer block creating function\n    * Creates a couple of DOM elements and appends them to question answers list\n    * @param {number} questionIndex - index of question which answer to be appended to\n    */\n    var appendAnswerBlock_ = function (questionIndex, answerData) {\n\n        var answer = {};\n        var question = quiz.nodes.questions[questionIndex];\n        var objectIndex = question.answers.length;\n\n        answerData = answerData || {};\n\n        answer.holder = newDOMElement_('tr', {\n            'class': 'quiz-form__question-answer-holder',\n            'data-question-index': questionIndex,\n            'data-object-index': objectIndex\n        });\n\n        answer.textColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-answer-text-column'\n        });\n\n        answer.text = newDOMElement_('input', {\n            'type': 'text',\n            'class': 'quiz-form__question-answer-text',\n            'value': answerData.text || '',\n            'required': '',\n            'form': 'null'\n        });\n\n        answer.scoreColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-answer-score-column'\n        });\n\n        answer.score = newDOMElement_('input', {\n            'type': 'number',\n            'min': '0',\n            'step': '1',\n            'value': answerData.score || '0',\n            'class': 'quiz-form__question-answer-score',\n            'required': '',\n            'form': 'null'\n        });\n\n        answer.messageColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-answer-message-column'\n        });\n\n        answer.message = newDOMElement_('input', {\n            'type': 'text',\n            'class': 'quiz-form__question-answer-message',\n            'value': answerData.message || '',\n            'required': '',\n            'form': 'null'\n        });\n\n        answer.destroyButtonColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-answer-destroy-button-column'\n        });\n\n        answer.destroyButton = newDOMElement_('span', {\n            'class': 'quiz-form__question-answer-destroy-button'\n        });\n\n        answer.destroyButtonCross = newDOMElement_('img', {\n            'class': 'quiz-form__button-cross',\n            'src': '/public/app/img/quizzes/cross.svg'\n        });\n\n        answer.textColumn.appendChild(answer.text);\n        answer.scoreColumn.appendChild(answer.score);\n        answer.messageColumn.appendChild(answer.message);\n\n        answer.destroyButton.appendChild(answer.destroyButtonCross);\n\n        answer.destroyButtonColumn.appendChild(answer.destroyButton);\n\n        answer.holder.appendChild(answer.textColumn);\n        answer.holder.appendChild(answer.scoreColumn);\n        answer.holder.appendChild(answer.messageColumn);\n        answer.holder.appendChild(answer.destroyButtonColumn);\n\n        question.answers.push(answer);\n\n        insertDOMElement_(answer);\n\n        updateDestroyIcons_(question.answers);\n\n    };\n\n\n    /**\n    * @private\n    * Question element creating function\n    * Creates a question JS object with DOM elements in it and appends it to the questions list\n    */\n    var appendQuestionBlock_ = function (questionData) {\n\n        var question = {};\n        var objectIndex = quiz.nodes.questions.length;\n\n        questionData = questionData || {};\n\n        question.holder = newDOMElement_('div', {\n            'class': 'quiz-form__question-holder',\n            'data-object-index': objectIndex\n        });\n\n        question.number = newDOMElement_('label', {\n            'class': 'quiz-form__question-number'\n        }, 'Вопрос ' + (objectIndex + 1));\n\n        question.destroyButton = newDOMElement_('span', {\n            'class': 'quiz-form__question-destroy-button'\n        });\n\n        question.destroyButtonCross = newDOMElement_('img', {\n            'class': 'quiz-form__button-cross',\n            'src': '/public/app/img/quizzes/cross.svg'\n        });\n\n        question.titleLabel = newDOMElement_('label', {\n            'class': 'quiz-form__label quiz-form__question-title-label'\n        }, 'Заголовок вопроса');\n\n        question.title = newDOMElement_('input', {\n            'type': 'text',\n            'class': 'quiz-form__question-title',\n            'value': questionData.title || '',\n            'required': '',\n            'form': 'null'\n        });\n\n        question.answers = [];\n\n        question.answersHolder = newDOMElement_('table', {\n            'class': 'quiz-form__question-answers-holder'\n        });\n\n        question.answersHead = newDOMElement_('thead', {\n            'class': 'quiz-form__question-answers-head'\n        });\n\n        question.answersLabel = newDOMElement_('th', {\n            'class': 'quiz-form__label quiz-form__question-answers-label'\n        }, 'Ответы');\n\n        question.scoresLabel = newDOMElement_('th', {\n            'class': 'quiz-form__label quiz-form__question-scores-label'\n        }, 'Баллы');\n\n        question.messagesLabel = newDOMElement_('th', {\n            'class': 'quiz-form__label quiz-form__question-messages-label'\n        }, 'Комментарии к ответам');\n\n        question.destroyButtonLabel = newDOMElement_('th', {\n            'class': 'quiz-form__question-destroy-buttons-label'\n        });\n\n        question.addAnswerButtonRow = newDOMElement_('tr', {\n            'class': 'quiz-form__question-add-answer-button-row'\n        });\n\n        question.addAnswerButtonColumn = newDOMElement_('td', {\n            'class': 'quiz-form__question-add-answer-button-column'\n        });\n\n        question.addAnswerButton = newDOMElement_('span', {\n            'class': 'quiz-form__question-add-answer-button'\n        }, 'Добавить ответ');\n\n        question.addAnswerButtonPlus = newDOMElement_('img', {\n            'class': 'quiz-form__button-plus',\n            'src': '/public/app/img/quizzes/plus.svg'\n        });\n\n        question.holder.appendChild(question.number);\n\n        question.destroyButton.appendChild(question.destroyButtonCross);\n\n        question.holder.appendChild(question.destroyButton);\n        question.holder.appendChild(question.titleLabel);\n        question.holder.appendChild(question.title);\n\n        question.answersHead.appendChild(question.answersLabel);\n        question.answersHead.appendChild(question.scoresLabel);\n        question.answersHead.appendChild(question.messagesLabel);\n        question.answersHead.appendChild(question.destroyButtonLabel);\n\n        question.answersHolder.appendChild(question.answersHead);\n\n        question.addAnswerButton.insertBefore(\n            question.addAnswerButtonPlus,\n            question.addAnswerButton.firstChild\n        );\n\n        question.addAnswerButtonColumn.appendChild(question.addAnswerButton);\n\n        question.addAnswerButtonRow.appendChild(question.addAnswerButtonColumn);\n\n        question.answersHolder.appendChild(question.addAnswerButtonRow);\n\n        question.holder.appendChild(question.answersHolder);\n\n        quiz.nodes.questions.push(question);\n\n        if (questionData.answers) {\n\n            questionData.answers.map(function (current) {\n\n                appendAnswerBlock_(objectIndex, current);\n\n            });\n\n        } else {\n\n            appendAnswerBlock_(objectIndex);\n            appendAnswerBlock_(objectIndex);\n            appendAnswerBlock_(objectIndex);\n\n        }\n\n        insertDOMElement_(question);\n\n        updateDestroyIcons_(quiz.nodes.questions);\n\n    };\n\n\n    /**\n    * @private\n    * Message block creating function\n    * Creates a result message DOM element and appends it to the result messages list\n    */\n    var appendResultMessageBlock_ = function (messageData) {\n\n        var message = {};\n        var objectIndex = quiz.nodes.resultMessages.length;\n\n        messageData = messageData || {};\n\n        message.holder = newDOMElement_('tr', {\n            'class': 'quiz-form__message-holder',\n            'data-object-index': objectIndex\n        });\n\n        message.messageColumn = newDOMElement_('td', {\n            'class': 'quiz-form__message-message-column'\n        });\n\n        message.message = newDOMElement_('input', {\n            'type': 'text',\n            'class': 'quiz-form__message-message',\n            'value': messageData.message || '',\n            'required': '',\n            'form': 'null'\n        });\n\n        message.scoreColumn = newDOMElement_('td', {\n            'class': 'quiz-form__message-score-column'\n        });\n\n        message.score = newDOMElement_('input', {\n            'type': 'number',\n            'min': '0',\n            'step': '1',\n            'value': messageData.score || '0',\n            'class': 'quiz-form__message-score',\n            'required': '',\n            'form': 'null'\n        });\n\n        message.destroyButtonColumn = newDOMElement_('td', {\n            'class': 'quiz-form__message-destroy-button-column'\n        });\n\n        message.destroyButton = newDOMElement_('span', {\n            'class': 'quiz-form__message-destroy-button'\n        });\n\n        message.destroyButtonCross = newDOMElement_('img', {\n            'class': 'quiz-form__button-cross',\n            'src': '/public/app/img/quizzes/cross.svg'\n        });\n\n        message.messageColumn.appendChild(message.message);\n        message.scoreColumn.appendChild(message.score);\n\n        message.destroyButton.appendChild(message.destroyButtonCross);\n\n        message.destroyButtonColumn.appendChild(message.destroyButton);\n\n        message.holder.appendChild(message.messageColumn);\n        message.holder.appendChild(message.scoreColumn);\n        message.holder.appendChild(message.destroyButtonColumn);\n\n        quiz.nodes.resultMessages.push(message);\n\n        insertDOMElement_(message);\n\n        updateDestroyIcons_(quiz.nodes.resultMessages);\n\n    };\n\n\n    /**\n    * @private\n    * Object shifting function\n    * Sets numbers in the question with child elements to given index\n    * @param {object} obj - object in which numbers to be set\n    * @param {number} index - index to which child elements' attributes to be set\n    */\n    var setObjectNumber_ = function (obj, numberTo) {\n\n        obj.holder.dataset.objectIndex = numberTo - 1;\n\n        if (obj.number) {\n\n            obj.number.textContent = 'Вопрос ' + numberTo;\n\n        }\n\n    };\n\n\n    /**\n    * @private\n    * Updating destroy icons function\n    * Disables or enables destroy icon for the only element in container\n    * @param {object} container - object in which icon is to be disabled or enabled\n    */\n    var updateDestroyIcons_ = function (container) {\n\n        if (container.length <= 1) {\n\n            container[0].destroyButton.style.display = 'none';\n\n            if (container[0].firstChild) {\n\n                container[0].firstChild.style.display = 'none';\n\n            }\n\n        } else {\n\n            container[0].destroyButton.style.display = '';\n\n            if (container[0].firstChild) {\n\n                container[0].firstChild.style.display = '';\n\n            }\n\n        }\n\n    };\n\n\n    /**\n    * @private\n    * DOM element inserting function\n    * Inserts DOM element to DOM\n    * @param {object} obj - object in which DOM element to be inserted\n    */\n    var insertDOMElement_ = function (obj) {\n\n        var before;\n        var parent;\n\n        if (obj.answers) {\n\n            before = quiz.questionInsertAnchor;\n            parent = quiz.form;\n\n        } else if (obj.text) {\n\n            before = quiz.nodes.questions[parseInt(obj.holder.dataset.questionIndex)].addAnswerButtonRow;\n            parent = quiz.nodes.questions[parseInt(obj.holder.dataset.questionIndex)].answersHolder;\n\n        } else {\n\n            before = quiz.resultMessageInsertAnchor;\n            parent = quiz.resultMessagesHolder;\n\n        }\n\n        parent.insertBefore(obj.holder, before);\n\n    };\n\n\n    /**\n    * @private\n    * Element object destroying function\n    * Removes the DOM element of object from DOM and destroys object itself\n    * @param {object} container - list where object is to be destroyed\n    * @param {number} elementIndex - index of object in list\n    */\n    var destroyObject_ = function (container, elementIndex) {\n\n        container[elementIndex].holder.parentNode.removeChild(container[elementIndex].holder);\n\n        container.splice(elementIndex, 1);\n        for (var i = elementIndex; i < container.length; i++) {\n\n            setObjectNumber_(container[i], i + 1);\n\n        }\n\n        updateDestroyIcons_(container);\n\n    };\n\n\n    /**\n    * @private\n    * Event listeners setting function\n    * Set event listeners for insert and destroy buttons and form submission\n    */\n    var setEventListeners_ = function () {\n\n        quiz.form.onsubmit = function (event) {\n\n            event.preventDefault();\n\n            var json = {\n                'title': quiz.form.querySelector('[name=\"title\"]').value,\n                'description': quiz.form.querySelector('[name=\"description\"]').value,\n                'questions': [],\n                'resultMessages': [],\n                'shareMessage': quiz.form.querySelector('[name=\"shareMessage\"]').value\n            };\n\n            for (var i in quiz.nodes.questions) {\n\n                var jsonQuestion = {};\n\n                jsonQuestion.title = quiz.nodes.questions[i].title.value;\n                jsonQuestion.answers = [];\n\n                for (var j in quiz.nodes.questions[i].answers) {\n\n                    var jsonAnswer = {};\n\n                    jsonAnswer.text = quiz.nodes.questions[i].answers[j].text.value;\n                    jsonAnswer.score = quiz.nodes.questions[i].answers[j].score.value;\n                    jsonAnswer.message = quiz.nodes.questions[i].answers[j].message.value;\n\n                    jsonQuestion.answers.push(jsonAnswer);\n\n                }\n\n                json.questions.push(jsonQuestion);\n\n            }\n\n            for (var i in quiz.nodes.resultMessages) {\n\n                var jsonMessage = {};\n\n                jsonMessage.score = quiz.nodes.resultMessages[i].score.value;\n                jsonMessage.message = quiz.nodes.resultMessages[i].message.value;\n\n                json.resultMessages.push(jsonMessage);\n\n            };\n\n            quiz.form.appendChild(newDOMElement_('input', {\n                'type': 'hidden',\n                'name': 'quiz_data',\n                'value': JSON.stringify(json)\n            }));\n\n            quiz.form.submit();\n\n        };\n\n        quiz.questionInsertButton.onclick = function () {\n\n            appendQuestionBlock_();\n\n        };\n\n        quiz.resultMessageInsertButton.onclick = function () {\n\n            appendResultMessageBlock_();\n\n        };\n\n\n        quiz.form.onclick = function (event) {\n\n            var container;\n            var elementIndex;\n\n            if (event.target.classList.contains('quiz-form__question-destroy-button')) {\n\n                container = quiz.nodes.questions;\n                elementIndex = parseInt(event.target.parentNode.dataset.objectIndex);\n\n            } else if (event.target.parentNode.classList.contains('quiz-form__question-destroy-button')) {\n\n                container = quiz.nodes.questions;\n                elementIndex = parseInt(event.target.parentNode.parentNode.dataset.objectIndex);\n\n            } else if (event.target.classList.contains('quiz-form__question-answer-destroy-button')) {\n\n                container = quiz.nodes.questions[\n                    parseInt(event.target.parentNode.parentNode.dataset.questionIndex)\n                ].answers;\n                elementIndex = parseInt(event.target.parentNode.parentNode.dataset.objectIndex);\n\n            } else if (event.target.parentNode.classList.contains('quiz-form__question-answer-destroy-button')) {\n\n                container = quiz.nodes.questions[\n                    parseInt(event.target.parentNode.parentNode.parentNode.dataset.questionIndex)\n                ].answers;\n                elementIndex = parseInt(event.target.parentNode.parentNode.parentNode.dataset.objectIndex);\n\n            } else if (event.target.classList.contains('quiz-form__message-destroy-button')) {\n\n                container = quiz.nodes.resultMessages;\n                elementIndex = parseInt(event.target.parentNode.parentNode.dataset.objectIndex);\n\n            } else if (event.target.classList.contains('quiz-form__question-add-answer-button')) {\n\n                container = null;\n                elementIndex = parseInt(event.target.parentNode.parentNode.parentNode.parentNode.dataset.objectIndex);\n\n            }\n\n            if (container === null) {\n\n                appendAnswerBlock_(elementIndex);\n\n            } else if (container !== undefined) {\n\n                destroyObject_(container, elementIndex);\n\n            }\n\n        };\n\n    };\n\n\n    /**\n    * @private\n    * First result message adding function\n    * Inserts result message with number 1 to the form\n    */\n    var addInitialResultMessage_ = function () {\n\n        appendResultMessageBlock_();\n\n    };\n\n\n    /**\n    * @private\n    * First question adding function\n    * Inserts question with number 1 to the form\n    */\n    var addInitialQuestion_ = function () {\n\n        appendQuestionBlock_();\n\n    };\n\n\n    /**\n    * @private\n    * Initial form parameters setting adding function\n    * Sets form variable and insert buttons\n    */\n    var setInitialFormParams_ = function () {\n\n        quiz.form = document.forms.quizForm;\n        quiz.questionInsertAnchor = document.getElementById('questionInsertAnchor');\n        quiz.questionInsertButton = document.getElementById('questionInsertButton');\n        quiz.resultMessageInsertAnchor = document.getElementById('resultMessageInsertAnchor');\n        quiz.resultMessageInsertButton = document.getElementById('resultMessageInsertButton');\n        quiz.resultMessagesHolder = document.getElementById('resultMessagesHolder');\n\n    };\n\n\n    /**\n    * @private\n    * Initial destroy icons updating function\n    * Updates initially placed destroy icons\n    */\n    var updateInitialDestroyIcons_ = function () {\n\n        updateDestroyIcons_(quiz.nodes.questions);\n        updateDestroyIcons_(quiz.nodes.resultMessages);\n        updateDestroyIcons_(quiz.nodes.questions[0].answers);\n\n    };\n\n\n    var render = function (quizData) {\n\n        var questions = quizData.questions,\n            resultMessages = quizData.resultMessages;\n\n        document.querySelector('[name=\"title\"]').value = quizData.title;\n        document.querySelector('textarea[name=\"description\"]').textContent = quizData.description;\n        document.querySelector('[name=\"shareMessage\"]').value = quizData.shareMessage;\n\n        setInitialFormParams_();\n\n        resultMessages.map(function (current) {\n\n            appendResultMessageBlock_(current);\n\n        });\n\n        questions.map(function (current) {\n\n            appendQuestionBlock_(current);\n\n        });\n\n        setEventListeners_();\n\n        updateInitialDestroyIcons_();\n\n    };\n\n\n    /**\n     * @public\n     * Initialization function\n     * Initializes quiz form: inserts initial DOM elements, sets initial event listeners, etc\n     */\n    quiz.init = function (quizData) {\n\n        if (quizData) {\n\n            render(quizData);\n            return;\n\n        }\n\n        setInitialFormParams_();\n        addInitialQuestion_();\n        addInitialResultMessage_();\n        setEventListeners_();\n        updateInitialDestroyIcons_();\n\n    };\n\n    return quiz;\n\n})({});\n","/**\n* Module for scroll-up button\n*/\nmodule.exports = function () {\n\n    /**\n    * Page scroll offset to show scroll-up button\n    */\n    var SCROLL_UP_OFFSET = 100,\n        button = null;\n\n    var scrollPage = function () {\n\n        window.scrollTo(0, 0);\n\n    };\n\n    var windowScrollHandler = function () {\n\n        if (window.pageYOffset > SCROLL_UP_OFFSET) {\n\n            button.classList.add('show');\n\n        } else {\n\n            button.classList.remove('show');\n\n        }\n\n    };\n\n    /**\n    * Init method\n    * Fired after document is ready\n    */\n\n    var init = function () {\n\n        /** Find scroll-up button */\n        button = document.createElement('DIV');\n\n        button.classList.add('scroll-up');\n        document.body.appendChild(button);\n\n        /** Bind click event on scroll-up button */\n        button.addEventListener('click', scrollPage);\n\n        /** Global window scroll handler */\n        window.addEventListener('scroll', windowScrollHandler);\n\n    };\n\n    return {\n        init : init\n    };\n\n\n}();\n","/**\n * Module for social sharing\n */\nmodule.exports = (function ( sharer ) {\n\n    /**\n     * @param  {Object} data - Info about item we want to share\n     */\n    sharer.vkontakte = function (data) {\n\n        var link  = 'https://vk.com/share.php?';\n\n        link += 'url='          + data.url;\n        link += '&title='       + data.title;\n        link += '&description=' + data.desc;\n        link += '&image='       + data.img;\n        link += '&noparse=true';\n\n        sharer.popup( link, 'vkontakte'  );\n\n    };\n\n    sharer.facebook = function (data) {\n\n        var FB_APP_ID = 1740455756240878,\n            link      = 'https://www.facebook.com/dialog/share?display=popup';\n\n        link += '&app_id='       + FB_APP_ID;\n        link += '&href='         + data.url;\n        link += '&redirect_uri=' + document.location.href;\n\n        sharer.popup( link, 'facebook' );\n\n    };\n    sharer.twitter = function (data) {\n\n        var link = 'https://twitter.com/share?';\n\n        link += 'text='      + data.title;\n        link += '&url='      + data.url;\n        link += '&counturl=' + data.url;\n\n        sharer.popup( link, 'twitter' );\n\n    };\n\n    sharer.telegram = function (data) {\n\n        var link  = 'https://telegram.me/share/url';\n\n        link += '?text=' + data.title;\n        link += '&url='  + data.url;\n\n        sharer.popup( link, 'telegram' );\n\n    };\n    /**\n     * @param  {String} url\n     * @param  {String} socialType\n     */\n    sharer.popup = function ( url, socialType ) {\n\n        window.open( url, '', 'toolbar=0,status=0,width=626,height=436' );\n\n        /**\n        * Write analytics goal\n        */\n        if ( window.yaCounter32652805 ) {\n\n            window.yaCounter32652805.reachGoal('article-share', function () {}, this, {type: socialType, url: url});\n\n        }\n\n    };\n\n    /**\n     * Init sharer\n     * @param  {String} buttonsSelector  - on wich elements should bind sharing\n     */\n    sharer.init = function (buttonsSelector) {\n\n        console.assert(buttonsSelector, 'Sharer: buttons selector is missed');\n\n        var shareButtons = document.querySelectorAll(buttonsSelector);\n\n        for (var i = shareButtons.length - 1; i >= 0; i--) {\n\n            shareButtons[i].addEventListener('click', sharer.click, true);\n\n        }\n\n    };\n    /**\n     * @param  {Event} event\n     */\n    sharer.click = function (event) {\n\n        var target = event.target;\n\n        /**\n        * Social provider stores in data 'shareType' attribute on share-button\n        * But click may be fired on child-element in button, so we need to handle it.\n        */\n        var type = target.dataset.shareType || target.parentNode.dataset.shareType;\n\n        if (!sharer[type]) return;\n\n        /**\n        * Sanitize share params\n        * @todo test for taint strings\n        */\n        // for (key in window.shareData){\n        //      window.shareData[key] = encodeURIComponent(window.shareData[key]);\n        // }\n\n        var shareData = {\n            url:    target.dataset.url || target.parentNode.dataset.url,\n            title:  target.dataset.title || target.parentNode.dataset.title,\n            desc:   target.dataset.desc || target.parentNode.dataset.desc,\n            img:    target.dataset.img || target.parentNode.dataset.title\n        };\n\n        /**\n        * Fire click handler\n        */\n\n        sharer[type](shareData);\n\n    };\n\n\n\n    return sharer;\n\n})({});\n","/**\n * codex.showMoreNews module\n * Used in news block\n * Reveals more news when appender button is fired\n * Usage onclick=\"codex.showMoreNews.init( this );\"\n */\nvar showMoreNews = function () {\n\n\t/**\n    * Helper for 'show more news' button\n    * @param {Element} button   - appender button\n    */\n    var init = function ( button ) {\n\n        var PORTION = 5; // Amount of news shown each time appender button is fired\n\n        var news = document.querySelectorAll('.news__list_item'),\n            hided = [];\n\n        for (var i = 0, newsItem; !!(newsItem = news[i]); i++) {\n\n            if ( newsItem.classList.contains('news__list_item--hidden') ) {\n\n                hided.push(newsItem);\n\n            }\n\n        }\n\n        /**\n         * @param {Element} item\n         * Remove PORTION of first elements from array hided\n         */\n        hided.splice(0, PORTION).map(function (item) {\n\n            item.classList.remove('news__list_item--hidden');\n\n        });\n\n        if (!hided.length) {\n\n            button.classList.add('news__list_item--hidden');\n\n        }\n\n    };\n\n    return {\n        init : init\n    };\n\n}({});\n\nmodule.exports = showMoreNews;\n","/**\n* Ajax file transport module\n* @author Savchenko Peter (vk.com/specc)\n* @param {Object} transport\n*/\nmodule.exports = (function (transport) {\n\n    transport.currentButtonClicked = {};\n\n    /**\n     * @param {Element} buttons\n     */\n    transport.init = function (buttons) {\n\n        transport.form  = document.getElementById('transportForm');\n        transport.input = document.getElementById('transportInput');\n\n        for (var i = buttons.length - 1; i >= 0; i--) {\n\n            buttons[i].addEventListener('click', transport.buttonCallback, false);\n\n        }\n\n        transport.input.addEventListener('change', transport.submitCallback, false );\n\n    };\n\n    /**\n     * @param {Event} event\n     */\n    transport.buttonCallback = function () {\n\n        var action       = this.dataset.action,\n            targetId     = this.dataset.id,\n            isMultiple   = !!this.dataset.multiple || false;\n\n        transport.fillForm({\n            action : action,\n            id     : targetId\n        });\n\n        if ( isMultiple ) {\n\n            transport.form.multiple = 'multiple';\n\n        }\n\n        transport.currentButtonClicked = this;\n        transport.input.click();\n\n    };\n\n    /**\n    * Append hidden inputs to tranport form\n    * @param {Object} data\n    */\n    transport.fillForm = function (data) {\n\n        var input,\n            alreadyAddedInput;\n\n        for ( var field in data ) {\n\n            if (typeof data[field] == 'undefined') {\n\n                continue;\n\n            }\n\n            alreadyAddedInput = transport.form.querySelector('input[name=' + field + ']');\n\n            if (typeof alreadyAddedInput != 'undefined' && alreadyAddedInput !== null) {\n\n                input = alreadyAddedInput;\n\n            } else {\n\n                input = document.createElement('input');\n\n            }\n\n            input.type = 'hidden';\n            input.name = field;\n            input.value = data[field];\n\n            transport.form.appendChild(input);\n\n        }\n\n    };\n\n    transport.submitCallback = function () {\n\n        const FILE_MAX_SIZE = 30 * 1024 * 1024; // 30 MB\n\n        var files = transport.getFileObject( this );\n\n        for (var i = files.length - 1; i >= 0; i--) {\n\n            /** Validate file extension */\n            if ( !transport.validateExtension(files[i]) || !transport.validateMIME(files[i]) ) {\n\n                window.console && console.warn('Wrong file type: %o', + files[i].name);\n                return;\n\n            }\n\n            /** Validate file size */\n            if ( !transport.validateSize( files[i], FILE_MAX_SIZE) ) {\n\n                window.console && console.warn('File size exceeded limit: %o MB', files[i].size / (1024*1024).toFixed(2) );\n                return;\n\n            }\n\n        }\n\n        transport.currentButtonClicked.className += ' loading';\n        transport.form.submit();\n\n    };\n\n    /**\n    * Fires from transport-frame window\n    * @param {Object} response\n    */\n    transport.response = function ( response ) {\n\n        transport.currentButtonClicked.className = transport.currentButtonClicked.className.replace('loading', '');\n\n        if (response.callback) {\n\n            eval(response.callback);\n\n        }\n\n        if ( response.result ) {\n\n            if ( response.result == 'error' ) {\n\n                window.console && console.warn( response.error_description || 'error' );\n\n            }\n\n        }\n\n    };\n    /**\n     * @param  {[Element]} fileInput\n     * @return {[type]}           [description]\n     */\n    transport.getFileObject = function ( fileInput ) {\n\n        if ( !fileInput ) return false;\n        /**\n        * Workaround with IE that doesn't support File API\n        * @todo test and delete this crutch\n        */\n        return typeof ActiveXObject == 'function' ? (new ActiveXObject('Scripting.FileSystemObject')).getFile(fileInput.value) : fileInput.files;\n\n    };\n\n    /**\n     * @param {Object} accept\n     * @param {Object} fileObj\n     * @return {Boolean}\n     */\n    transport.validateMIME = function ( fileObj, accept ) {\n\n\n        accept = typeof accept == 'array' ? accept : ['image/jpeg', 'image/png'];\n\n        for (var i = accept.length - 1; i >= 0; i--) {\n\n            if ( fileObj.type == accept[i] ) return true;\n\n        }\n        return false;\n\n    };\n\n    transport.validateExtension = function ( fileObj, accept ) {\n\n        var ext = fileObj.name.match(/\\.(\\w+)($|#|\\?)/);\n\n        if (!ext) return false;\n\n        ext = ext[1].toLowerCase();\n\n        accept = typeof accept == 'array' ? accept : ['jpg', 'jpeg', 'png'];\n\n        for (var i = accept.length - 1; i >= 0; i--) {\n\n            if ( ext == accept[i] ) return true;\n\n        }\n\n        return false;\n\n    };\n\n    transport.validateSize = function ( fileObj, maxSize ) {\n\n        return fileObj.size < maxSize;\n\n    };\n\n    return transport;\n\n})({});\n","/**\n * Module for VK community widget: https://vk.com/dev/Community\n * Adds vkWidget to page\n */\nvar vkWidget = function () {\n\n    var targetId, targetView, communityId,\n        VK_API_URI = 'https://vk.com/js/api/openapi.js';\n\n    /**\n     * Initialization of module\n     *\n     * @param  {[Object]} params\n     * @param {int} params.id - element id, where widget is appended\n     * @param {int} params.display.mode - widget appearance (\"3\" - show people in the community)\n     * @param {int|string} params.display.width - set widget width to a fixed number or auto\n     * @param {int} params.communityId - id of VK community\n     *\n     * @example\n     * vkWidget.init({\n     *   id: 'vk_groups',\n     *   display: {\n     *       'mode': 3,\n     *       'width': 'auto'\n     *   },\n     *   communityId: 103229636\n     * });\n     */\n    var init = function (params) {\n\n        targetId = params.id || null,\n        targetView = params.display || { 'mode': 3, 'width': 'auto' },\n        communityId = params.communityId || 0;\n\n        if (document.getElementById(targetId) == undefined) {\n\n            console.log('Cannot find element with id '+ targetId);\n            return;\n\n        };\n\n        loadScript();\n\n    };\n\n    /**\n     * Loads VK Api script to initialize a widget\n     * and appends it to page\n     */\n    var loadScript = function () {\n\n        var vkApiScript = document.createElement('SCRIPT');\n\n        vkApiScript.src = VK_API_URI;\n\n        vkApiScript.setAttribute('async', 'true');\n\n        vkApiScript.onload = showWidget;\n\n        document.body.appendChild(vkApiScript);\n\n    };\n\n    /**\n     * Runs widget initiating from vkApi\n     */\n    var showWidget = function () {\n\n        window.VK.Widgets.Group(targetId, targetView, communityId);\n\n    };\n\n    return {\n        init : init\n    };\n\n}({});\n\nmodule.exports = vkWidget;"],"sourceRoot":""}